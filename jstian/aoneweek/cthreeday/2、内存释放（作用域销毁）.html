<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>内存释放（作用域销毁）</title>
</head>
<body>

</body>
</html>
<script>
    //堆内存释放：（不是重点）
    //      如果这块内存没有任何变量或者对象的属性所占用那么浏览器就会主动释放这些没用的内存
    //堆内存释放，我们能做的就是主动赋值一个null 浏览器就会自动释放
    var obj = {name:'zhu'};//这个对象所占用的那个对内存不能释放。
       obj = null;//这就是把内存释放了






    //重点是栈内存释放（作用域何时销毁）

    /*
    *    作用域不销毁：
    *        1、函数在执行的时候会形成一个私有作用域。然后这个函数中的一部分（我们指的是引用数据类型）如果被函数外的变量或者对象的属性所占用。那么这个函数运行时候的产生的那个作用域不会被释放。
    *        2、事件绑定的时候：dom对象的事件属性占用一个函数执行后返回的引用数据类型，也会导致这个作用域不被释放。原因是这个作用域内的私有变量也被保存下来了。
    *        3、暂时不释放：
    *
    *
    * */


    function fn(){
        var num = 100;
        return function (){
            num++;
        };//这个函数是一个引用数据类型
    }
    var f = fn();//全局变量f占用着fn函数的返回结果
    //fn在执行的时候醒成一个作用域，然后fn内return的小函数被全局变量f占用。导致fn运行时候产生的那个作用域没有被释放。只要这个作用域没有被释放。那么私有变量num任然还能在这个作用域中。其实这个num就是被保存下来了。

    var oo ={};
    oo.fn = fn();



</script>